<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>REL Editor</title>
  <link rel="stylesheet" href="./editor_styles.css">
</head>
<body>
  <header class="app-header">
    <div class="header-preview-group">
      <label id="previewBreakpointRow" class="header-preview-control">
        Preview
        <select id="previewBreakpointSelect">
          <option value="desktop">Desktop</option>
          <option value="tablet">Tablet</option>
          <option value="mobile">Mobile</option>
        </select>
      </label>
      <button id="interactionModeToggleBtn" class="interaction-toggle-btn" type="button" aria-pressed="false">Edit</button>
    </div>
    <button id="hamburgerMenuBtn" class="hamburger-btn" type="button" aria-label="Open menu" aria-haspopup="true" aria-expanded="false">Menu</button>
  </header>
  <div id="hamburgerMenuBackdrop" class="topbar-menu-backdrop hidden" aria-hidden="true"></div>
  <aside id="hamburgerMenuPanel" class="topbar-menu-panel hidden" aria-hidden="true">
    <div class="topbar-menu-header">
      <div class="brand">REL_EDITOR</div>
      <button id="hamburgerMenuCloseBtn" type="button">Close</button>
    </div>

    <section class="topbar-menu-section">
      <h3>Appearance</h3>
      <div class="menu-theme-row">
        <label class="menu-theme-label">
          Theme Color
          <input id="uiThemeColorInput" class="menu-theme-color-input" type="color" value="#f4efe7">
        </label>
        <button id="uiThemeResetBtn" type="button">Reset theme</button>
      </div>
    </section>

    <section class="topbar-menu-section">
      <h3>Project</h3>
      <div class="project-picker">
        <label>
          Project Root
          <input id="projectRootInput" type="text" placeholder="C:/path/to/project">
        </label>
        <label>
          Project Type
          <select id="projectTypeSelect">
            <option value="static-html">Static HTML</option>
            <option value="vite-react-style">Vite React (Style only)</option>
          </select>
        </label>
        <label id="indexPathRow">
          Index Path
          <input id="indexPathInput" type="text" placeholder="index.html">
        </label>
        <div id="viteControlsRow" class="vite-controls hidden">
          <label>
            Dev URL
            <input id="devUrlInput" type="text" placeholder="http://localhost:5173">
          </label>
          <button id="startDevServerBtn" type="button">Start Dev Server</button>
          <button id="stopDevServerBtn" type="button">Stop Dev Server</button>
          <span id="viteStatusText" class="vite-status">Vite: stopped</span>
        </div>
        <pre id="viteLogText" class="vite-log hidden"></pre>
        <button id="loadProjectBtn" type="button">Load Project</button>
      </div>
    </section>

    <section class="topbar-menu-section">
      <h3>Actions</h3>
      <div class="topbar-menu-actions">
        <button id="savePatchBtn" type="button">Save Patch</button>
        <button id="exportSafeBtn" type="button">Export Safe</button>
        <button id="resetLayoutBtn" type="button">Reset Layout</button>
      </div>
      <div id="previewWidthRow" class="preview-width-row hidden">
        <label>
          Width
          <input id="previewWidthRange" type="range" min="280" max="1400" step="1">
        </label>
        <span id="previewWidthValue" class="preview-width-value">768px</span>
      </div>
      <div id="statusText" class="status">Ready</div>
      <pre id="exportReport" class="export-report hidden"></pre>
    </section>

    <section class="topbar-menu-section">
      <h3>Libraries</h3>
      <div class="libraries-box">
        <label>
          Design Library
          <select id="designLibrarySelect">
            <option value="none">None</option>
            <option value="bootstrap">Bootstrap 5</option>
            <option value="bulma">Bulma</option>
            <option value="pico">Pico.css</option>
            <option value="tailwind">Tailwind CDN</option>
          </select>
        </label>
        <label class="inline-check">
          <input id="bootstrapJsCheckbox" type="checkbox">
          Bootstrap JS bundle
        </label>
        <label>
          Icon Set
          <select id="iconSetSelect">
            <option value="none">None</option>
            <option value="material-icons">Material Icons</option>
            <option value="font-awesome">Font Awesome Free</option>
          </select>
        </label>
        <label class="inline-check">
          <input id="animateCssCheckbox" type="checkbox">
          Animate.css
        </label>
      </div>
      <div class="fonts-box">
        <label>
          Font Library
          <select id="fontLibrarySelect">
            <option value="none">None</option>
            <option value="google">Google Fonts</option>
            <option value="bunny">Bunny Fonts</option>
            <option value="adobe-edge">Adobe Edge Fonts</option>
          </select>
        </label>
        <div id="fontLibraryFamilyRow" class="font-library-row hidden">
          <input id="fontLibraryFamilyInput" type="text" placeholder="Poppins">
          <button id="addFontFamilyBtn" type="button">Add Font</button>
        </div>
        <div id="fontFamiliesList" class="font-families-list"></div>
      </div>
    </section>
  </aside>

  <main id="layoutRoot" class="layout">
    <section class="panel panel-left">
      <div class="tabs">
        <button class="tab-btn active" data-tab="information" type="button">information</button>
        <button class="tab-btn" data-tab="tree" type="button">tree</button>
        <button class="tab-btn" data-tab="add" type="button">add</button>
        <button class="tab-btn" data-tab="theme" type="button">theme</button>
      </div>

      <div class="tab-content active" data-tab-content="information">
        <h2>Selected Element</h2>
        <pre id="selectionInfo" class="info-box">No element selected.</pre>
      </div>

      <div class="tab-content" data-tab-content="tree">
        <div class="tree-toolbar">
          <input id="treeSearchInput" type="text" placeholder="Search tag, .class, #id">
          <button id="refreshTreeBtn" type="button">Refresh</button>
        </div>
        <div id="treeContainer" class="tree-box"></div>
      </div>

      <div class="tab-content" data-tab-content="add">
        <div class="add-help">Drag components into preview to insert before/after/inside, or click to append near current context.</div>
        <h3 class="add-title">Basic Elements</h3>
        <div id="addBasicList" class="add-list"></div>
        <div id="addExternalSection" class="add-external hidden">
          <h3 class="add-title">Library Blocks</h3>
          <div id="addExternalList" class="add-list"></div>
        </div>
      </div>

      <div class="tab-content" data-tab-content="theme">
        <section class="theme-card">
          <h3 class="theme-title">Theme Presets</h3>
          <label class="theme-row">
            <span>Preset</span>
            <select id="themePresetSelect"></select>
          </label>
          <label class="theme-row">
            <span>Name</span>
            <input id="themeNameInput" type="text" placeholder="New Theme">
          </label>
          <div class="theme-actions">
            <button id="newThemePresetBtn" type="button">New</button>
            <button id="saveThemePresetBtn" type="button">Save</button>
            <button id="deleteThemePresetBtn" type="button">Delete</button>
          </div>
        </section>

        <section class="theme-card">
          <h3 class="theme-title">Color Palette</h3>
          <div id="themePaletteList" class="theme-palette-list"></div>
          <div id="themeCustomPaletteList" class="theme-palette-list"></div>
          <div class="theme-actions">
            <button id="addCustomColorBtn" type="button">Add custom color</button>
          </div>
        </section>

        <section class="theme-card">
          <h3 class="theme-title">Apply Palette</h3>
          <label class="theme-row">
            <span>color</span>
            <select id="paletteColorSelect"></select>
          </label>
          <label class="theme-row">
            <span>background-color</span>
            <select id="paletteBackgroundSelect"></select>
          </label>
          <label class="theme-row">
            <span>border-color</span>
            <select id="paletteBorderSelect"></select>
          </label>
          <div class="theme-actions">
            <button id="applyPaletteToSelectedBtn" type="button">Apply Palette to Selected Element</button>
          </div>
        </section>

        <section class="theme-card">
          <h3 class="theme-title">Font Presets</h3>
          <label class="theme-row">
            <span>Body Font</span>
            <select id="themeBodyFontSelect"></select>
          </label>
          <label class="theme-row">
            <span>Heading Font</span>
            <select id="themeHeadingFontSelect"></select>
          </label>
          <label class="theme-row">
            <span>Body Size</span>
            <input id="themeBodySizeInput" type="text" placeholder="16px">
          </label>
          <label class="theme-row">
            <span>H1 Size</span>
            <input id="themeH1SizeInput" type="text" placeholder="2.5rem">
          </label>
          <label class="theme-row">
            <span>H2 Size</span>
            <input id="themeH2SizeInput" type="text" placeholder="2rem">
          </label>
          <label class="theme-row">
            <span>H3 Size</span>
            <input id="themeH3SizeInput" type="text" placeholder="1.5rem">
          </label>
          <label class="theme-row">
            <span>Small Size</span>
            <input id="themeSmallSizeInput" type="text" placeholder="0.875rem">
          </label>
          <label class="theme-row">
            <span>Line Height</span>
            <input id="themeLineHeightInput" type="text" placeholder="1.5">
          </label>
          <div class="theme-actions">
            <button id="themeLoadFontsBtn" type="button">Load fonts</button>
            <button id="applyFontsGloballyBtn" type="button">Apply fonts globally</button>
          </div>
        </section>

        <section class="theme-card">
          <div class="theme-actions">
            <button id="applyThemeToPageBtn" type="button">Apply Theme to Page</button>
          </div>
        </section>
      </div>
    </section>

    <div id="leftResizer" class="panel-resizer" aria-label="Resize left panel" role="separator"></div>

    <section class="panel panel-middle">
      <div id="previewViewportWrap" class="preview-viewport-wrap">
        <div id="previewViewport" class="preview-viewport">
          <iframe id="liveFrame" title="Live Preview"></iframe>
        </div>
      </div>
    </section>

    <div id="rightResizer" class="panel-resizer" aria-label="Resize right panel" role="separator"></div>

    <section class="panel panel-right">
      <h2>Inspector</h2>

      <section class="inspector-section">
        <h3>Element Attributes</h3>
        <label class="control-item">
          <span>ID</span>
          <input id="attrIdInput" type="text" placeholder="main-title">
        </label>
        <label class="control-item">
          <span>Class</span>
          <input id="attrClassInput" type="text" placeholder="class-one class-two">
        </label>
        <div class="danger-row">
          <button id="deleteElementBtn" class="danger-btn" type="button">Delete Element</button>
        </div>
      </section>

      <section id="linkSettingsSection" class="inspector-section">
        <h3>Link Settings</h3>
        <label id="makeLinkRow" class="check-row">
          <input id="makeLinkCheckbox" type="checkbox">
          <span>Make this element a link</span>
        </label>
        <label class="control-item">
          <span>href</span>
          <input id="linkHrefInput" type="text" placeholder="https://example.com">
        </label>
        <label class="control-item">
          <span>target</span>
          <select id="linkTargetInput">
            <option value="">(empty)</option>
            <option value="_self">_self</option>
            <option value="_blank">_blank</option>
          </select>
        </label>
        <label class="control-item">
          <span>rel</span>
          <input id="linkRelInput" type="text" placeholder="noopener noreferrer">
        </label>
        <label class="control-item">
          <span>title</span>
          <input id="linkTitleInput" type="text" placeholder="Link title">
        </label>
      </section>

      <section id="textSettingsSection" class="inspector-section hidden">
        <h3>Text</h3>
        <div id="textComplexWarning" class="text-warning hidden"></div>
        <label class="control-item control-item-stacked">
          <span>Text Content</span>
          <textarea id="textContentInput" rows="4" placeholder="Element text"></textarea>
        </label>
        <div class="text-actions">
          <button id="applyTextBtn" type="button">Apply</button>
        </div>
      </section>

      <section id="imageSettingsSection" class="inspector-section hidden">
        <h3>Image Settings</h3>
        <label class="control-item">
          <span>src</span>
          <input id="imageSrcInput" type="text" placeholder="rel_editor/assets/photo.png">
        </label>
        <label class="control-item">
          <span>alt</span>
          <input id="imageAltInput" type="text" placeholder="Image description">
        </label>
        <label class="control-item">
          <span>width</span>
          <input id="imageWidthInput" type="text" placeholder="300">
        </label>
        <label class="control-item">
          <span>height</span>
          <input id="imageHeightInput" type="text" placeholder="200">
        </label>
        <label class="control-item">
          <span>object-fit</span>
          <select id="imageObjectFitInput">
            <option value="">(empty)</option>
            <option value="fill">fill</option>
            <option value="contain">contain</option>
            <option value="cover">cover</option>
            <option value="none">none</option>
            <option value="scale-down">scale-down</option>
          </select>
        </label>
        <label class="control-item">
          <span>border-radius</span>
          <input id="imageBorderRadiusInput" type="text" placeholder="8px">
        </label>
        <label class="control-item">
          <span>display</span>
          <select id="imageDisplayInput">
            <option value="">(empty)</option>
            <option value="block">block</option>
            <option value="inline-block">inline-block</option>
            <option value="inline">inline</option>
            <option value="none">none</option>
          </select>
        </label>
        <div class="upload-row">
          <button id="uploadImageBtn" type="button">Upload Image</button>
          <input id="uploadImageInput" type="file" accept="image/*" hidden>
        </div>
      </section>

      <section class="inspector-section">
        <h3>Style Controls</h3>
        <div id="controlsContainer" class="controls"></div>
      </section>
    </section>
  </main>
  <div id="resizeOverlay" class="resize-overlay hidden" aria-hidden="true"></div>

  <script src="./tooltips_registry.js"></script>
  <script src="./tooltip_manager.js"></script>
  <script src="./editor_app.js"></script>
</body>
</html>
